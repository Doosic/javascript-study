# 전역 변수의 문제점

## 변수의 생명주기

### 지역 변수의 생명 주기

- 변수는 선언에 의해 생성되고 할당에 의해 값을 갖는다. 그리고 언젠가 소멸한다. 변수는 life cycle이 존재한다.
  만약 생명주기가 없다면 한번 선언된 변수는 영원히 메모리 공간을 점유할것이다.
```
function foo(){
    var x = 'local';
    console.log(x); // local
    return x;
}

foo();
console.log(x); // ReferenceError: x is not defined
```
- 지역변수 x는 foo 함수가 호출되기 이전에 생성되지 않는다.
- 변수 호이스팅에서 변수 선언은 선언문이 어디에있는 상관 없이 가장먼저 실행된다 했는데 **이 설명은 전역변수 한정이다.**
- 함수 내부에서 선언한 변수는 함수가 호출된 직후에 함수 몸체의 코드가 한 줄씩 순차적으로 실행되기 이전에 자바스크립트 엔진에 의해 먼저 실행된다.
- **지연변수의 생명주기는 함수의 생명주기와 일치한다.** 함수를 호출시 함수 내부에 있는 변수들이 자바스크립트 엔진에 의해 선언되고 undefined로 초기화된다.
  이후 할당문 실행시 값이 할당되고 함수가 종료되면 변수도 소멸되어 생명주기가 종료된다.

#### 주의
- 일반적으로는 함수 종료시에 변수의 생명주기가 끝나고 변수가 할당되어 있던 메모리 공간을 누구도 참조하지 않을때에
  가비지 콜렉터에 의해 해제되어 가용 메모리 풀에 반환된다. 즉, 누군가가 메모리 공간을 참조하고 있으면 해제되지 않고
  확보된 상태로 남아있게 된다.
- 스코프도 마찬가지로 누군가 참조하고있다면 스코프는 소멸하지 않고 생존하게 된다. 이에 대한 부분은 클로저에서 살펴보자.

#### 지역변수 생명주기 정리
- 전역 변수는 전역에서 유효하다. 지역변수는 자신이 속한 함수와 하위 함수 전체에서 유효하다.
- 즉, 호이스팅은 변수 선언이 스코프의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징을 말한다.

### 전역 변수의 생명 주기

